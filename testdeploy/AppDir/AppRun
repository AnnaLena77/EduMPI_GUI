#! /usr/bin/env bash

# autogenerated by linuxdeploy

# make sure errors in sourced scripts will cause this script to stop
set -e

this_dir="$(readlink -f "$(dirname "$0")")"

source "$this_dir"/apprun-hooks/"linuxdeploy-plugin-qt-hook.sh"

CACHE_FILE="$this_dir"/usr/lib/gdk-pixbuf-2.0/2.10.0/loaders.cache
PERSONAL_CACHE_FILE=/tmp/loaders_personal.cache

cp "$CACHE_FILE" "$PERSONAL_CACHE_FILE"


sed -i "s|__APPDIR__|$this_dir|g" "$PERSONAL_CACHE_FILE"

#sed -i "s|__APPDIR__|$this_dir|g""$CACHE_FILE"

# Setze die Umgebungsvariablen
export GDK_PIXBUF_MODULE_FILE="$PERSONAL_CACHE_FILE"
export GDK_PIXBUF_MODULEDIR="$this_dir"/usr/lib/gdk-pixbuf-2.0/2.10.0/loaders
#export XDG_DATA_DIRS="$thisdir"/usr/share


exec "$this_dir"/AppRun.wrapped "$@"
